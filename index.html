<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tecla Ultra Avan√ßada (Responsiva e Vocal)</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
<style>
    /* Estilos base e fontes */
    body { font-family: 'Inter', sans-serif; margin:0; padding:10px; background:#f8fafc; color:#333; }
    .container { max-width:1100px; margin:auto; background:white; padding:15px; border-radius:18px; box-shadow:0 10px 20px rgba(0,0,0,0.05); }
    header { text-align:center; padding:15px; background:#1d4ed8; color:white; border-radius:12px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
    
    /* Inputs e Bot√µes */
    select, input[type="text"] { width:100%; padding:14px; margin-top:10px; font-size:16px; border:2px solid #ccc; border-radius:10px; transition: border-color 0.3s; }
    select:focus, input[type="text"]:focus { border-color: #2563eb; outline: none; }
    button { background:#2563eb; color:white; padding:12px 20px; font-size:15px; border:none; border-radius:10px; margin-top:10px; cursor:pointer; transition: background-color 0.3s, transform 0.1s; }
    button:hover { background:#1e40af; }
    button:active { transform: scale(0.98); }
    
    /* Pictogramas - Otimiza√ß√£o Mobile */
    .pictogramas { display:flex; flex-wrap:wrap; gap:8px; margin-top:15px; justify-content: center; }
    /* No mobile, 2 itens por linha (aprox 48% da largura) */
    .pictograma { flex:1 1 calc(50% - 8px); max-width: calc(50% - 8px); background:#eff6ff; padding:12px; font-size:20px; text-align:center; border-radius:12px; cursor:pointer; border:1px solid #bfdbfe; transition: background-color 0.3s, box-shadow 0.3s; }
    /* No tablet/PC, 3 itens por linha (aprox 31% da largura) */
    @media (min-width: 640px) {
        .pictograma { flex:1 1 calc(33.33% - 8px); max-width: calc(33.33% - 8px); padding: 16px; font-size: 24px; }
    }
    .pictograma:hover { background:#dbeafe; box-shadow: 0 4px 8px rgba(37, 99, 235, 0.2); }
    
    /* Feedback Boxes */
    #saida, #alertas, #orientacaoDala { margin-top:15px; font-size:16px; padding:20px; border-radius:12px; }
    #saida { background:#e0f2fe; color:#0c4a6e; border-left: 5px solid #38bdf8; }
    #alertas { background:#fef3c7; color:#92400e; border-left: 5px solid #fbbf24; }
    #orientacaoDala { background:#ecfdf5; color:#065f46; border-left: 5px solid #10b981; }
    .alert { margin-top:10px; padding:12px; border-radius:8px; font-weight:bold; }
    
    /* Barras de Vers√£o */
    .barra-versoes { display:flex; justify-content:space-around; margin-top:25px; gap:8px; }
    .barra { padding:12px 8px; border-radius:10px; cursor:pointer; flex:1; text-align:center; color:white; font-weight:bold; transition: opacity 0.3s; font-size: 14px; }
    @media (min-width: 640px) {
        .barra { padding:12px 20px; font-size: 16px; }
    }
    .barra.free { background:#10b981;} 
    .barra.intermediate { background:#f97316;} 
    .barra.premium { background:#ef4444;} 
    .barra:not(.active) { opacity: 0.7; }
    .barra.active { box-shadow: 0 0 0 4px #2563eb; opacity: 1; }

    /* Componente de Respira√ß√£o (√Çncora Vocal) */
    .respiracao { 
        margin-top:20px; 
        padding: 20px;
        border-radius:12px; 
        font-weight: bold; 
        color:white; 
        background-color: #4f46e5; /* Indigo */
        text-align: center; 
        transition: all 0.5s ease-in-out;
        min-height: 80px;
    }
    .loading-dot { animation: dot-flicker 1.5s infinite; }
    .loading-dot:nth-child(2) { animation-delay: 0.5s; }
    .loading-dot:nth-child(3) { animation-delay: 1s; }
    @keyframes dot-flicker {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
    }

    /* Hist√≥rico de Logs */
    #historicoVersoes { padding-left:0; list-style:none; max-height: 350px; overflow-y: auto; }
    
    /* Gr√°fico e Iframe */
    .iframe-versao { width:100%; height:250px; margin-top:20px; border:2px solid #2563eb; border-radius:12px; }
    canvas { margin-top:15px; border:1px solid #e5e7eb; border-radius:12px; background:#f9fafb; width: 100%; height: 250px; }
</style>
</head>
<body>
<div class="container">
    <header>
        <h1 class="text-3xl font-extrabold">üß† Tecla Ultra Avan√ßada</h1>
        <p class="text-sm mt-1">Hist√≥rico, gr√°ficos de alertas, predi√ß√£o avan√ßada e Orienta√ß√£o Imediata Dala</p>
    </header>

    <!-- Se√ß√£o Principal de Intera√ß√£o -->
    <section class="mb-6">
        <label for="idioma" class="text-sm font-medium text-gray-700">üåç Escolha o idioma:</label>
        <select id="idioma">
            <option value="pt-PT">Portugu√™s</option>
            <option value="en-US">English</option>
        </select>

        <label for="entrada" class="text-sm font-medium text-gray-700 mt-4 block">üí¨ Digite ou fale o que deseja:</label>
        <div class="flex space-x-2">
            <input type="text" id="entrada" placeholder="Ex: Quero brincar com o carrinho" class="flex-grow" />
            <button onclick="responder()" class="flex-shrink-0">üîä Tecla</button>
            <button onclick="falar()" class="flex-shrink-0">üéôÔ∏è Falar</button>
        </div>

        <div class="pictogramas">
            <div class="pictograma" onclick="usarFrase('Quero comer')">üçΩÔ∏è Comer</div>
            <div class="pictograma" onclick="usarFrase('Preciso ir ao banheiro')">üöª Banheiro</div>
            <div class="pictograma" onclick="usarFrase('Estou feliz!')">üòä Feliz</div>
            <div class="pictograma" onclick="usarFrase('Quero brincar')">üß∏ Brincar</div>
            <div class="pictograma" onclick="usarFrase('Estou triste')">üò¢ Triste</div>
            <div class="pictograma" onclick="usarFrase('Estou com dor')">ü§ï Dor</div>
        </div>
    </section>

    <!-- Exerc√≠cio de Respira√ß√£o Vocal (√Çncora) -->
    <div class="respiracao hidden" id="respiracao">
        <p class="text-2xl font-black">üßò Guia Vocal de Ancoragem</p>
    </div>

    <!-- Se√ß√£o de Feedback e Alertas (Dispers√£o Zero) -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div id="saida" class="md:col-span-1"></div>
        <div id="alertas" class="md:col-span-1"></div> 
        <div id="orientacaoDala" class="md:col-span-1 hidden">
            <h3 class="font-bold text-lg mb-2 text-green-700">‚ú® Orienta√ß√£o Imediata Dala</h3>
            <p id="dala-insight-text" class="text-sm text-green-600 italic">Aguardando a pr√≥xima intera√ß√£o para an√°lise.</p>
        </div>
    </section>
    
    <!-- Se√ß√£o do Dashboard T√©cnico -->
    <section class="mt-8">
        <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">üõ†Ô∏è Dashboard T√©cnico e Vers√µes</h2>
        
        <div class="barra-versoes">
            <div class="barra free active" id="btn-free" onclick="abrirVersao('free')">Gratuita</div>
            <div class="barra intermediate" id="btn-intermediate" onclick="abrirVersao('intermediate')">Intermedi√°ria</div>
            <div class="barra premium" id="btn-premium" onclick="abrirVersao('premium')">Premium</div>
        </div>

        <!-- Iframe da Vers√£o (Est√°tico para simula√ß√£o) -->
        <iframe class="iframe-versao" id="iframeVersao" src="https://placehold.co/800x250/e0f2fe/1e40af?text=Simula√ß√£o+Vers√£o+Tecla+GRATUITA"></iframe>

        <!-- Logs e Gr√°fico em Layout de Duas Colunas -->
        <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div>
                <h3 class="text-xl font-bold mb-3 text-gray-700">Log de Hist√≥rico (√öltimas 10)</h3>
                <ul id="historicoVersoes"></ul>
            </div>
            
            <div>
                <h3 class="text-xl font-bold mb-3 text-gray-700">Gr√°fico de Pontua√ß√£o Acumulada</h3>
                <canvas id="graficoAlertas"></canvas>
            </div>
        </div>
    </section>
</div>

<script>
    // --- VARI√ÅVEIS DE ESTADO ---
    const JANELA_TEMPO_MS = 10 * 60 * 1000; // 10 minutos
    const LIMITE_PONTUACAO_PREDICAO = 5; 
    const ALERTAS_NECESSARIOS_PARA_VOZ = 3; // NOVO: M√≠nimo de alertas para ativar a √¢ncora vocal

    const apiKey = ""; 
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

    let versaoAtual = 'free';
    let dadosLogs = [];
    let alertasConsecutivos = 0; // Contador de alertas de stress/tristeza
    const MAX_LOGS = 50; 
    
    let chart;
    let ctx;
    const cores = {free:'#10b981', intermediate:'#f97316', premium:'#ef4444'};

    // -----------------------------------------------------------
    // 1. L√ìGICA DE UTILIDADES (Calculo e Voz)
    // -----------------------------------------------------------
    
    function calcularSeveridadeAlerta(frase) {
        const texto = frase.toLowerCase();
        let score = 0;
        let isAlert = false;

        const pesos = {
            'dor': 3, 'triste': 2, 'bravo': 1, 'irritado': 1, 'zangado': 1,
            'doente': 2, 'mal': 1, 'odeio': 2, 'n√£o quero': 1
        };

        for (const palavra in pesos) {
            if (texto.includes(palavra)) {
                score += pesos[palavra];
                isAlert = true;
            }
        }
        
        if (frase.toUpperCase() === frase && frase.length > 5) { score += 1; }
        if ((frase.match(/!/g) || []).length >= 2) { score += 1; }

        return { isAlert, score };
    }

    function falarTexto(texto, idioma){
        const synth = window.speechSynthesis;
        // Cancela qualquer fala anterior para garantir que as instru√ß√µes de respira√ß√£o n√£o se sobreponham
        synth.cancel(); 
        const utterThis = new SpeechSynthesisUtterance(texto);
        utterThis.lang = idioma;
        synth.speak(utterThis);
    }

    function falar(){
        const idioma = document.getElementById("idioma").value;
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        if (!recognition) {
            alert("Desculpe, o reconhecimento de voz n√£o √© suportado no seu navegador.");
            return;
        }
        recognition.lang = idioma;
        recognition.start();
        recognition.onresult = function(event){
            const textoFalado = event.results[0][0].transcript;
            document.getElementById("entrada").value = textoFalado;
            responder();
        }
    }


    // -----------------------------------------------------------
    // 2. L√ìGICA DE INTERA√á√ÉO E RESPOSTA PRINCIPAL
    // -----------------------------------------------------------
    
    async function responder() {
        const entrada = document.getElementById("entrada").value.trim();
        if (!entrada) return; 

        const idioma = document.getElementById("idioma").value;
        const saidaDiv = document.getElementById("saida");
        
        // 1. An√°lise da frase
        const { isAlert, score } = calcularSeveridadeAlerta(entrada);
        
        // NOVO: Atualiza o contador de alertas consecutivos
        if (isAlert) {
            alertasConsecutivos++;
        } else if (score === 0) {
            // Frases neutras ou positivas (score 0) resetam o contador
            alertasConsecutivos = 0; 
        }

        // 2. Resposta Imediata da Tecla
        let resposta = idioma === 'pt-PT'
            ? `Tecla disse: "${entrada}". Entendemos a sua necessidade com carinho.`
            : `Tecla said: "${entrada}". We hear your need with care.`;

        saidaDiv.innerText = resposta;
        falarTexto(resposta, idioma);
        
        // 3. Processamento e Logs
        salvarFrase(entrada, isAlert, score); 
        processarEntrada(entrada, isAlert); 
        
        // 4. Orienta√ß√£o Dala (s√≥ em caso de alerta OU na vers√£o premium)
        if (isAlert || versaoAtual === 'premium') {
            await generateDalaInsight(entrada);
        } else {
            document.getElementById("orientacaoDala").classList.add('hidden');
        }

        // 5. Atualiza√ß√µes Visuais
        atualizarHistorico();
        if (typeof Chart !== 'undefined') { 
            atualizarGrafico();
        }
    }

    function usarFrase(texto){
        document.getElementById("entrada").value = texto;
        responder();
    }


    // -----------------------------------------------------------
    // 3. INTEGRA√á√ÉO LLM (Dala)
    // -----------------------------------------------------------
    
    async function generateDalaInsight(entradaDaCrianca) {
        const insightDiv = document.getElementById('orientacaoDala');
        const insightText = document.getElementById('dala-insight-text');
        
        insightDiv.classList.remove('hidden');
        insightText.innerHTML = `<div class="flex items-center space-x-2 text-green-700">
            <span>Dala est√° a gerar a Orienta√ß√£o Imediata...</span>
            <span class="loading-dot">.</span><span class="loading-dot">.</span><span class="loading-dot">.</span>
        </div>`;
        
        const systemPrompt = "Atue como Dala, um guia compassivo e protetor para terapeutas/cuidadores. Analise a frase da crian√ßa e gere uma 'Orienta√ß√£o de A√ß√£o Imediata' concisa (m√°ximo 3 frases) e pr√°tica. A orienta√ß√£o deve ser focada em validar a emo√ß√£o da crian√ßa e oferecer um primeiro passo de conex√£o. Use um tom caloroso e de apoio. NUNCA use marcadores, listas ou sub-cabe√ßalhos.";
        
        const userQuery = `A crian√ßa disse: "${entradaDaCrianca}". Qual √© a Orienta√ß√£o Imediata para o cuidador/terapeuta?`;

        const payload = {
            contents: [{ parts: [{ text: userQuery }] }],
            systemInstruction: { parts: [{ text: systemPrompt }] },
        };

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }

            const result = await response.json();
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

            if (text) {
                insightText.textContent = text;
            } else {
                throw new Error("Resposta da LLM vazia.");
            }

        } catch (error) {
            console.error("Erro na chamada da API Gemini (Dala):", error);
            insightText.innerHTML = `<p class="text-red-600">Falha na comunica√ß√£o com Dala. Tente reconectar (recarga na Vers√£o Premium).</p>`;
        }
    }


    // -----------------------------------------------------------
    // 4. L√ìGICA DE ALERTA, PREDI√á√ÉO E √ÇNCORA VOCAL
    // -----------------------------------------------------------
    
    function salvarFrase(frase, isAlert, score){
        dadosLogs.push({versao: versaoAtual, frase, alerta: isAlert, score: score, timestamp: Date.now()}); 
        if(dadosLogs.length > MAX_LOGS) dadosLogs.shift();
    }
    
    function predicaoPreventiva(){
        if(dadosLogs.length === 0) return { isTriggered: false, score: 0 };
        
        const agora = Date.now();
        let pontuacaoTotal = 0;
        
        const logsRecentes = dadosLogs.filter(log => (agora - log.timestamp) <= JANELA_TEMPO_MS);
        
        logsRecentes.forEach(log => { pontuacaoTotal += log.score; });
        
        const isTriggered = pontuacaoTotal >= LIMITE_PONTUACAO_PREDICAO;
        
        return { isTriggered, score: pontuacaoTotal };
    }

    function processarEntrada(entrada, isAlert){
        const alertasDiv = document.getElementById("alertas");
        alertasDiv.innerHTML = ''; 

        // 1. L√≥gica da Respira√ß√£o por Voz (Ativa SOMENTE ap√≥s 3 alertas consecutivos)
        if (isAlert) {
            if (alertasConsecutivos >= ALERTAS_NECESSARIOS_PARA_VOZ) {
                iniciarRespiracaoVoz(document.getElementById("idioma").value); 
                alertasConsecutivos = 0; // Reset ap√≥s o exerc√≠cio de ancoragem
                const div = document.createElement('div');
                div.className = 'alert bg-purple-100 border-purple-500 text-purple-700';
                div.innerText = `üßò EXERC√çCIO ATIVADO: ${ALERTAS_NECESSARIOS_PARA_VOZ} alertas consecutivos. Iniciando guia de respira√ß√£o por voz.`;
                alertasDiv.appendChild(div);
            } else {
                // Alerta Imediato normal, mostrando o contador
                const div = document.createElement('div');
                div.className = 'alert bg-yellow-100 border-yellow-500 text-yellow-700';
                div.innerText = `‚ö†Ô∏è ALERTA IMEDIATO: Indicador de stress/tristeza detectado. Alerta ${alertasConsecutivos} de ${ALERTAS_NECESSARIOS_PARA_VOZ} para ativar o guia vocal.`;
                alertasDiv.appendChild(div);
            }
        }
        
        // 2. Predi√ß√£o Avan√ßada (Baseada em hist√≥rico de 10 minutos)
        const predicao = predicaoPreventiva();

        if(predicao.isTriggered){
            const div = document.createElement('div');
            div.className = 'alert bg-red-100 border-red-500 text-red-700 mt-2';
            div.innerText = `üö® PREDI√á√ÉO AVAN√áADA - RISCO ELEVADO: Acumulou ${predicao.score} pontos de alerta nos √∫ltimos 10 minutos.`;
            alertasDiv.appendChild(div);
            falarTexto("Aten√ß√£o! Risco de crise elevado!", document.getElementById("idioma").value);
        }
        
        // 3. Caso Sem Alerta
        if (!isAlert && !predicao.isTriggered) {
            alertasDiv.innerHTML = '<p class="text-gray-500">Nenhum alerta imediato ou predi√ß√£o avan√ßada disparada.</p>';
        }
    }


    /**
     * NOVO: Guia de respira√ß√£o por voz (Texto-para-Voz).
     */
    function iniciarRespiracaoVoz(idioma){
        const respDiv = document.getElementById("respiracao");
        if(respDiv.dataset.running === 'true') return; 

        respDiv.dataset.running = 'true';
        respDiv.classList.remove('hidden');

        const fases = [
            { text: "Inspire fundo... Pela boca. Um, dois, tr√™s, quatro. üå¨Ô∏è", duration: 4000 },
            { text: "Segure o ar... Mantenha a calma e o foco. ‚úã", duration: 4000 },
            { text: "Expire lentamente pelo nariz. Solte toda a tens√£o. Um, dois, tr√™s, quatro. üí®", duration: 4000 },
            { text: "Segure por um momento. Relaxe. üßò", duration: 4000 }
        ];
        const totalCycles = 3;
        let index = 0;

        if (respDiv.dataset.timerId) {
            clearTimeout(parseInt(respDiv.dataset.timerId));
        }

        function ciclo() {
            if (index >= fases.length * totalCycles) { 
                // Fim do exerc√≠cio
                respDiv.innerHTML = `<p class="text-xl font-black">‚ú® Exerc√≠cio de respira√ß√£o conclu√≠do. Sinta a calma.</p>`; 
                respDiv.dataset.running = 'false';
                respDiv.dataset.timerId = null;
                setTimeout(() => { respDiv.classList.add('hidden'); }, 5000);
                return;
            }

            const fase = fases[index % fases.length];
            respDiv.innerHTML = `<p class="text-2xl font-black">${fase.text}</p>`;
            falarTexto(fase.text, idioma); 
            
            index++;
            
            const timerId = setTimeout(ciclo, fase.duration);
            respDiv.dataset.timerId = timerId.toString();
        }
        
        ciclo();
    }

    // -----------------------------------------------------------
    // 5. L√ìGICA DE VISUALIZA√á√ÉO (Vers√µes, Hist√≥rico e Gr√°fico)
    // -----------------------------------------------------------

    function abrirVersao(versao){
        // Atualiza bot√µes
        document.querySelectorAll('.barra').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`btn-${versao}`).classList.add('active');
        
        versaoAtual = versao;
        
        // Atualiza Iframe
        let iframe = document.getElementById("iframeVersao");
        let links = {
            free:'https://placehold.co/800x250/e0f2fe/1e40af?text=Simula√ß√£o+Vers√£o+Tecla+GRATUITA',
            intermediate:'https://placehold.co/800x250/fef3c7/92400e?text=Simula√ß√£o+Vers√£o+Tecla+INTERMEDI√ÅRIA',
            premium:'https://placehold.co/800x250/fee2e2/991b1b?text=Tecla+Premium+-+Recursos+Avan√ßados+Incorporados'
        };
        iframe.src = links[versao];
        
        // Dispara a an√°lise Dala se for Premium
        const ultimaFrase = dadosLogs.length > 0 ? dadosLogs[dadosLogs.length - 1].frase : '';
        const dalaDiv = document.getElementById("orientacaoDala");
        if (versao === 'premium' && dadosLogs.length > 0) {
            dalaDiv.classList.remove('hidden');
            generateDalaInsight(`(An√°lise Premium em Vers√£o) Revisite a √∫ltima frase: ${ultimaFrase}`);
        } else {
             dalaDiv.classList.add('hidden');
             document.getElementById("dala-insight-text").textContent = "Aguardando a pr√≥xima intera√ß√£o para an√°lise.";
        }

        atualizarHistorico();
        if (typeof Chart !== 'undefined') { 
            atualizarGrafico();
        }
    }

    function atualizarHistorico(){
        const lista = document.getElementById("historicoVersoes");
        lista.innerHTML = "";
        
        const logsToShow = dadosLogs.slice(-10).reverse(); 
        
        logsToShow.forEach(log => {
            const alertClass = log.alerta ? 'font-bold text-red-700 bg-red-100' : 'text-gray-700 bg-gray-50';
            const li = document.createElement("li");
            li.className = `${alertClass} p-2 rounded-lg hover:bg-gray-200 cursor-pointer text-sm`;
            li.innerHTML = `[${log.versao.toUpperCase()}] <span class="font-mono text-xs px-1 rounded-sm bg-gray-200">Score: ${log.score}</span> ${log.frase} ${log.alerta ? 'üö®' : ''}`;
            li.onclick = () => { document.getElementById("entrada").value = log.frase; responder(); };
            lista.appendChild(li);
        });
        
        if (logsToShow.length === 0) {
            lista.innerHTML = '<li class="text-gray-500">Nenhuma intera√ß√£o registrada ainda.</li>';
        }
    }

    function atualizarGrafico(){
        if (!ctx || typeof Chart === 'undefined') { return; }

        let counts = {free: 0, intermediate: 0, premium: 0};
        dadosLogs.forEach(l => { counts[l.versao] += l.score; });
        
        const labels = Object.keys(counts).map(v => v.charAt(0).toUpperCase() + v.slice(1));
        const dataValues = Object.values(counts);
        const backgroundColors = Object.values(cores);

        if (chart) { chart.destroy(); }

        chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Pontua√ß√£o de Alertas Acumulados',
                    data: dataValues,
                    backgroundColor: backgroundColors,
                    borderColor: backgroundColors.map(c => c.replace('10b981', '059669').replace('f97316', 'c2410c').replace('ef4444', 'b91c1c')), 
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Pontua√ß√£o Total de Severidade' },
                        ticks: { precision: 0 }
                    },
                    x: { title: { display: true, text: 'Vers√£o Tecla' } }
                },
                plugins: { legend: { display: false } }
            }
        });
    }

    // -----------------------------------------------------------
    // 6. INICIALIZA√á√ÉO
    // -----------------------------------------------------------

    window.onload = function(){
        ctx = document.getElementById("graficoAlertas").getContext("2d"); 

        const script = document.createElement('script');
        script.src = "https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js";
        
        script.onload = () => {
            document.getElementById("orientacaoDala").classList.add('hidden');
            abrirVersao('free'); 
        };
        
        document.head.appendChild(script);
    };
</script>
</body>
</html>
            
            
